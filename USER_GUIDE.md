# 使用指南

## 📖 详细使用步骤

### 第一步：安装和启动

1. 按照 [QUICK_START.md](QUICK_START.md) 的说明安装 Node.js（v16 或 v18）和依赖
2. 运行 `npm start` 启动软件
3. 软件将自动检测并显示所有摄像头的实时画面

### 第二步：配置设置（首次使用推荐）

1. 点击右上角的 **"⚙️ 设置"** 按钮
2. 配置以下选项：

   **a. 视频保存位置**
   - 点击"浏览..."按钮选择文件夹
   - 推荐选择非系统盘的文件夹（如 D:\CamRecordings）
   - 确保该位置有足够的空间

   **b. 最大存储空间**
   - 输入数字，单位为 GB
   - 建议值：硬盘可用空间的 50-70%
   - 例如：如果有 100GB 可用空间，设置为 50-70 GB

   **c. 视频分割时间**
   - 输入数字，单位为分钟
   - 推荐值：30 分钟
   - 范围：1-120 分钟

3. 点击 **"💾 保存设置"**

### 第三步：查看预览和选择摄像头

1. 软件启动后会自动显示所有摄像头的实时画面
2. 默认显示所有摄像头，您可以：
   - 勾选需要录制的摄像头（选中后预览会自动更新）
   - 使用“✔️ 全选”或“✖️ 取消全选”快捷操作
   - 如果摄像头列表未更新，点击“🔄 刷新摄像头”
3. 选择改变时，预览画面会实时更新，只显示选中的摄像头

### 第四步：开始录制

1. 查看预览画面，确认摄像头工作正常
2. 选择至少一个摄像头
3. 点击 **“▶️ 开始录制”** 按钮
4. 观察界面变化：
   - 预览区域显示所有摄像头的实时画面
   - 每个画面右上角显示红色 **"● 录制中"** 标识
   - 录制状态显示 **"⏺️ 录制中"**（红色闪烁）
   - 录制时长开始计时（格式：HH:MM:SS）

### 第五步：监控录制

录制过程中可以：
- **查看实时预览**：所有摄像头的画面实时显示
- **查看时间戳水印**：视频右下角显示实时录制时间（格式：YYYY-MM-DD HH:MM:SS），文字颜色根据背景亮度自动调整（深色背景用白字，浅色背景用黑字）
- **查看录制时长**：右上角计时器显示当前录制时长
- **查看存储信息**：底部状态栏显示已用空间和文件数量
- **继续使用电脑**：软件在后台录制，不影响其他工作

### 第六步：停止录制

1. 点击 **"⏹️ 停止录制"** 按钮
2. 所有摄像头停止录制
3. 视频文件自动保存到设置的位置
4. 录制状态恢复为 **"未录制"**

### 第七步：查看录制文件

**方法一：通过软件打开**
1. 点击 **"⚙️ 设置"**
2. 点击 **"📁 打开保存文件夹"**

**方法二：手动打开**
1. 打开资源管理器
2. 进入设置的保存位置
3. 查看所有录制的视频文件

**文件命名说明**：
- 格式：`年-月-日_时-分-秒_摄像头名称.webm`
- 示例：`2026-02-09_14-30-00_USB Camera.webm`
- 这样命名便于按时间查找录像

## 🎯 使用场景

### 场景一：监控录制
- **用途**：长时间监控，定期查看录像
- **设置建议**：
  - 最大存储空间：根据需要保存的天数计算
  - 分割时间：30 分钟
  - 选择所有摄像头

### 场景二：会议录制
- **用途**：录制视频会议，记录讨论内容
- **设置建议**：
  - 最大存储空间：10-20 GB
  - 分割时间：60 分钟
  - 只选择主要摄像头

### 场景三：教学录制
- **用途**：录制教学过程，制作教学视频
- **设置建议**：
  - 最大存储空间：50 GB 以上
  - 分割时间：30 分钟
  - 选择多个角度的摄像头

## ⚠️ 注意事项

### 录制前检查
- ✅ 摄像头已正确连接
- ✅ 驱动程序已安装
- ✅ 其他软件未占用摄像头
- ✅ 硬盘有足够空间
- ✅ 电源设置为"高性能"模式（笔记本）

### 录制中注意
- ⚠️ 不要拔掉摄像头
- ⚠️ 不要关闭软件
- ⚠️ 确保电脑不会进入休眠
- ⚠️ 注意硬盘空间（底部状态栏）

### 录制后处理
- 💡 及时备份重要录像
- 💡 定期清理不需要的文件
- 💡 使用 VLC 等播放器查看
- 💡 如需编辑，可使用视频编辑软件

## 🔧 高级技巧

### 1. 计算存储空间需求

**公式**：
```
每小时容量 ≈ 摄像头数量 × 1.5 GB
```

**示例**：
- 2个摄像头，24小时录制：2 × 1.5 × 24 = 72 GB/天
- 如需保存7天：72 × 7 = 504 GB

### 2. 优化录制质量

当前设置为 2.5 Mbps 视频比特率，如需调整：
1. 打开 [renderer.js](renderer.js)
2. 找到 `videoBitsPerSecond: 2500000`
3. 修改数值（单位：bits/秒）
   - 更高质量：3500000（3.5 Mbps）
   - 更低容量：1500000（1.5 Mbps）

### 3. 时间戳水印自适应说明

**智能颜色选择**：
- 软件会自动检测视频右下角区域的背景亮度
- 深色背景（亮度 < 128）：使用白色文字 + 半透明黑色背景
- 浅色背景（亮度 > 128）：使用黑色文字 + 半透明白色背景
- 无需手动配置，确保任何场景下时间戳都清晰可读

**时间戳格式**：
- 格式：`YYYY-MM-DD HH:MM:SS`
- 示例：`2026-02-09 14:30:45`
- 位置：视频右下角固定位置
- 更新频率：每帧实时更新（30 FPS）

### 4. 自动启动录制

可以通过 Windows 任务计划程序实现开机自动启动并录制：
1. 创建启动脚本（start_recording.bat）
2. 设置任务计划程序在登录时运行
3. 需要修改代码添加自动录制功能

### 5. 远程访问录像

如需远程查看录像：
1. 使用云同步软件（如OneDrive、Dropbox）同步保存文件夹
2. 或设置局域网共享访问保存文件夹
3. 或使用远程桌面软件访问电脑

## 📊 性能参考

### 系统资源占用（参考）
- **CPU**：每个摄像头约 5-15%（720p）
- **内存**：约 100-200 MB + 每个摄像头 50-100 MB
- **硬盘写入**：每个摄像头约 1-2 GB/小时

### 推荐配置
- **同时录制 1-2 个摄像头**：双核 2.0GHz + 4GB RAM
- **同时录制 3-4 个摄像头**：四核 2.5GHz + 8GB RAM
- **同时录制 5+ 个摄像头**：六核 3.0GHz + 16GB RAM

## 🆘 问题排查

### 问题：摄像头检测不到
**解决方法**：
1. 检查设备管理器中的摄像头状态
2. 更新摄像头驱动程序
3. 尝试拔掉重新插入（USB摄像头）
4. 重启软件和电脑
5. 检查摄像头隐私设置（Windows设置 > 隐私 > 相机）

### 问题：录制画面卡顿
**解决方法**：
1. 关闭其他占用CPU/内存的程序
2. 降低录制的摄像头数量
3. 在摄像头设置中降低分辨率
4. 检查硬盘写入速度（使用固态硬盘更佳）
5. 清理系统垃圾文件

### 问题：软件崩溃或无响应
**解决方法**：
1. 查看任务管理器，结束所有 electron 进程
2. 删除配置文件：`%APPDATA%\camrec\config.json`
3. 重新启动软件
4. 检查系统日志查看错误信息
5. 以管理员身份运行

### 问题：视频无法播放
**解决方法**：
1. 安装 VLC Media Player
2. 确认文件完整（检查文件大小）
3. 确认录制已正常停止
4. 尝试使用浏览器播放
5. 使用 FFmpeg 修复文件：
   ```
   ffmpeg -i damaged.webm -c copy fixed.webm
   ```

## 📞 获取帮助

如果遇到问题：
1. 查看 [README.md](README.md) 的"常见问题"部分
2. 检查配置文件是否正确
3. 查看控制台错误信息（开发者工具）
4. 搜索类似问题的解决方案
5. 提交 Issue 描述详细问题

---

**提示**：第一次使用建议先进行短时间测试录制，确认一切正常后再进行长时间录制。
